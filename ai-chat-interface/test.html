<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI ëŒ€í™”ì°½ í…ŒìŠ¤íŠ¸</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 100vh;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
        }

        .chat-container {
            width: 100%;
            height: 100vh;
            background: white;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 20px;
            text-align: center;
            flex-shrink: 0;
        }

        .header h1 {
            font-size: 1.3rem;
            margin-bottom: 8px;
        }

        .ai-selector {
            display: flex;
            gap: 12px;
            justify-content: center;
            margin-top: 10px;
        }

        .ai-option {
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid transparent;
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .ai-option:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .ai-option.active {
            background: white;
            color: #667eea;
            border-color: white;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .model-selection {
            margin-top: 10px;
            padding: 12px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            max-height: 300px;
            overflow-y: auto;
        }

        .model-section {
            margin-bottom: 8px;
        }

        .model-section:last-child {
            margin-bottom: 0;
        }

        .model-label {
            font-size: 0.8rem;
            font-weight: 600;
            margin-bottom: 4px;
            color: white;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .model-dropdown {
            width: 100%;
            padding: 6px 10px;
            border: none;
            border-radius: 6px;
            background: white;
            color: #333;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .model-dropdown:hover {
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .model-dropdown:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.3);
        }

        .model-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }

        .model-badge {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .toggle-models {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.8rem;
            margin-top: 10px;
            transition: all 0.3s ease;
        }

        .toggle-models:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .chat-messages {
            flex: 1;
            padding: 15px 20px;
            overflow-y: auto;
            background: #f8f9fa;
            display: flex;
            flex-direction: column;
            min-height: 0;
        }

        .welcome-message {
            text-align: center;
            color: #666;
            padding: 40px 20px;
            font-style: italic;
            margin: auto;
        }

        .welcome-message h3 {
            color: #333;
            margin-bottom: 10px;
            font-style: normal;
        }

        .message {
            margin-bottom: 15px;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .message.user {
            text-align: right;
        }

        .message.ai {
            text-align: left;
        }

        .message-bubble {
            display: inline-block;
            max-width: 70%;
            padding: 12px 16px;
            border-radius: 18px;
            margin: 0 10px;
            word-wrap: break-word;
        }

        .message.user .message-bubble {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .message.ai .message-bubble {
            background: white;
            color: #333;
            border: 1px solid #e0e0e0;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }

        .ai-label {
            font-size: 0.8rem;
            color: #666;
            margin-bottom: 5px;
            font-weight: 500;
        }

        .input-container {
            padding: 20px;
            border-top: 1px solid #e0e0e0;
            background: white;
        }

        .input-wrapper {
            display: flex;
            gap: 10px;
            align-items: flex-end;
        }

        .message-input {
            flex: 1;
            padding: 12px 16px;
            border: 2px solid #e0e0e0;
            border-radius: 25px;
            outline: none;
            resize: none;
            font-family: inherit;
            font-size: 14px;
            max-height: 100px;
            transition: border-color 0.3s ease;
        }

        .message-input:focus {
            border-color: #667eea;
        }

        .send-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .send-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .send-button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        @media (max-width: 768px) {
            .header {
                padding: 10px 15px;
            }

            .header h1 {
                font-size: 1.1rem;
                margin-bottom: 6px;
            }

            .ai-selector {
                gap: 8px;
            }

            .ai-option {
                padding: 8px 15px;
                font-size: 0.8rem;
            }

            .model-selection {
                padding: 10px;
                max-height: 250px;
            }

            .message-bubble {
                max-width: 90%;
                padding: 10px 14px;
            }

            .chat-messages {
                padding: 12px 15px;
            }

            .input-container {
                padding: 15px;
            }

            .message-input {
                padding: 10px 14px;
                font-size: 13px;
            }

            .send-button {
                padding: 10px 18px;
            }
        }
    </style>
</head>
<body>
    <div class="chat-container">
        <div class="header">
            <h1>ğŸ¤– AI í”„ë¡œê·¸ë¨ ìƒì„± ë„ìš°ë¯¸</h1>
            <div class="ai-selector">
                <button class="ai-option active" onclick="selectAI('crew-ai')">CREW AI</button>
                <button class="ai-option" onclick="selectAI('meta-gpt')">MetaGPT</button>
            </div>

            <div class="model-selection" id="modelSelection" style="display: none;">
                <!-- CREW AI ëª¨ë¸ ì„ íƒ -->
                <div id="crewModels">
                    <div class="model-section">
                        <div class="model-label">
                            ğŸ‘” Manager (í”„ë¡œì íŠ¸ ì´ê´„)
                        </div>
                        <select class="model-dropdown" id="managerModel" onchange="updateModelInfo()">
                            <option value="gpt-4" selected>GPT-4 (ì „ëµì  ì‚¬ê³ )</option>
                            <option value="claude-3-opus">Claude-3 Opus (ì°½ì˜ì  ë¦¬ë”ì‹­)</option>
                            <option value="gemini-pro">Gemini Pro (ê· í˜•ì¡íŒ ê´€ë¦¬)</option>
                        </select>
                    </div>

                    <div class="model-section">
                        <div class="model-label">
                            ğŸ” Researcher (ì¡°ì‚¬/ë¶„ì„)
                        </div>
                        <select class="model-dropdown" id="researcherModel" onchange="updateModelInfo()">
                            <option value="claude-3-sonnet" selected>Claude-3 Sonnet (ë¶„ì„ íŠ¹í™”)</option>
                            <option value="gpt-4">GPT-4 (ì‹¬í™” ì¡°ì‚¬)</option>
                            <option value="gemini-pro">Gemini Pro (ì •ë³´ ìˆ˜ì§‘)</option>
                        </select>
                    </div>

                    <div class="model-section">
                        <div class="model-label">
                            ğŸ¨ Designer (UI/UX ì„¤ê³„)
                        </div>
                        <select class="model-dropdown" id="designerModel" onchange="updateModelInfo()">
                            <option value="claude-3-sonnet" selected>Claude-3 Sonnet (ì°½ì˜ì  ì„¤ê³„)</option>
                            <option value="claude-3-opus">Claude-3 Opus (ì˜ˆìˆ ì  ê°ê°)</option>
                            <option value="gpt-4">GPT-4 (ì‚¬ìš©ì ì¤‘ì‹¬ ì„¤ê³„)</option>
                        </select>
                    </div>

                    <div class="model-section">
                        <div class="model-label">
                            ğŸ’» Developer (ì½”ë“œ êµ¬í˜„)
                        </div>
                        <select class="model-dropdown" id="developerModel" onchange="updateModelInfo()">
                            <option value="claude-3-sonnet" selected>Claude-3 Sonnet (ì½”ë”© íŠ¹í™”)</option>
                            <option value="deepseek-coder">DeepSeek Coder (ì½”ë“œ ìƒì„± íŠ¹í™”)</option>
                            <option value="codellama-70b">CodeLlama 70B (ì˜¤í”ˆì†ŒìŠ¤)</option>
                            <option value="phind-codellama">Phind CodeLlama (ê°œë°œ ë„êµ¬)</option>
                        </select>
                    </div>

                    <div class="model-section">
                        <div class="model-label">
                            ğŸ”§ Tester (í’ˆì§ˆ ë³´ì¦)
                        </div>
                        <select class="model-dropdown" id="testerModel" onchange="updateModelInfo()">
                            <option value="gpt-3.5-turbo" selected>GPT-3.5 Turbo (íš¨ìœ¨ì  í…ŒìŠ¤íŠ¸)</option>
                            <option value="gpt-4">GPT-4 (ì¢…í•©ì  ê²€ì¦)</option>
                            <option value="claude-3-sonnet">Claude-3 Sonnet (ë…¼ë¦¬ì  ê²€ì¦)</option>
                        </select>
                    </div>
                </div>

                <!-- MetaGPT ëª¨ë¸ ì„ íƒ -->
                <div id="metaModels" style="display: none;">
                    <div class="model-section">
                        <div class="model-label">
                            ğŸ“‹ Product Manager (PRD ì‘ì„±)
                        </div>
                        <select class="model-dropdown" id="productManagerModel" onchange="updateModelInfo()">
                            <option value="gpt-4" selected>GPT-4 (ìš”êµ¬ì‚¬í•­ ë¶„ì„)</option>
                            <option value="claude-3-opus">Claude-3 Opus (ì°½ì˜ì  ê¸°íš)</option>
                            <option value="gemini-pro">Gemini Pro (ì²´ê³„ì  ë¬¸ì„œí™”)</option>
                        </select>
                    </div>

                    <div class="model-section">
                        <div class="model-label">
                            ğŸ—ï¸ Architect (ì‹œìŠ¤í…œ ì„¤ê³„)
                        </div>
                        <select class="model-dropdown" id="architectModel" onchange="updateModelInfo()">
                            <option value="gpt-4" selected>GPT-4 (ì•„í‚¤í…ì²˜ ì„¤ê³„)</option>
                            <option value="claude-3-sonnet">Claude-3 Sonnet (ê¸°ìˆ  ì„¤ê³„)</option>
                            <option value="claude-3-opus">Claude-3 Opus (ì°½ì˜ì  êµ¬ì¡°)</option>
                        </select>
                    </div>

                    <div class="model-section">
                        <div class="model-label">
                            ğŸ“… Project Manager (ì¼ì • ê´€ë¦¬)
                        </div>
                        <select class="model-dropdown" id="projectManagerModel" onchange="updateModelInfo()">
                            <option value="gpt-3.5-turbo" selected>GPT-3.5 Turbo (íš¨ìœ¨ì  ê´€ë¦¬)</option>
                            <option value="gpt-4">GPT-4 (ì „ëµì  ê´€ë¦¬)</option>
                            <option value="gemini-pro">Gemini Pro (ì²´ê³„ì  ê´€ë¦¬)</option>
                        </select>
                    </div>

                    <div class="model-section">
                        <div class="model-label">
                            âš™ï¸ Engineer (êµ¬í˜„/ê°œë°œ)
                        </div>
                        <select class="model-dropdown" id="engineerModel" onchange="updateModelInfo()">
                            <option value="claude-3-sonnet" selected>Claude-3 Sonnet (ì½”ë”© íŠ¹í™”)</option>
                            <option value="deepseek-coder">DeepSeek Coder (ì „ë¬¸ ì½”ë”©)</option>
                            <option value="gpt-4">GPT-4 (ê³ í’ˆì§ˆ êµ¬í˜„)</option>
                            <option value="codellama-70b">CodeLlama 70B (ì˜¤í”ˆì†ŒìŠ¤)</option>
                        </select>
                    </div>

                    <div class="model-section">
                        <div class="model-label">
                            ğŸ§ª QA Engineer (í’ˆì§ˆ ê´€ë¦¬)
                        </div>
                        <select class="model-dropdown" id="qaengineerModel" onchange="updateModelInfo()">
                            <option value="gpt-3.5-turbo" selected>GPT-3.5 Turbo (íš¨ìœ¨ì  QA)</option>
                            <option value="gpt-4">GPT-4 (ì¢…í•©ì  í’ˆì§ˆ ê´€ë¦¬)</option>
                            <option value="claude-3-sonnet">Claude-3 Sonnet (ì²´ê³„ì  í…ŒìŠ¤íŠ¸)</option>
                        </select>
                    </div>
                </div>

                <div class="model-info">
                    <div class="model-badge" id="costInfo">ì˜ˆìƒ ë¹„ìš©: ë³´í†µ</div>
                    <div class="model-badge" id="speedInfo">ì²˜ë¦¬ ì†ë„: ë¹ ë¦„</div>
                    <div class="model-badge" id="qualityInfo">í’ˆì§ˆ: ë†’ìŒ</div>
                </div>
            </div>

            <button class="toggle-models" onclick="toggleModelSelection()">
                âš™ï¸ ëª¨ë¸ ì„¤ì • <span id="toggleIcon">â–¼</span>
            </button>
        </div>

        <div class="chat-messages" id="chatMessages">
            <div class="welcome-message">
                <h3>í™˜ì˜í•©ë‹ˆë‹¤! ğŸ‘‹</h3>
                <p>AIë¥¼ ì„ íƒí•˜ê³  ë§Œë“¤ê³  ì‹¶ì€ í”„ë¡œê·¸ë¨ì— ëŒ€í•´ ì„¤ëª…í•´ì£¼ì„¸ìš”.</p>
                <p>CREW AIëŠ” íŒ€ì›Œí¬ ê¸°ë°˜ìœ¼ë¡œ, MetaGPTëŠ” ê³ ì„±ëŠ¥ ì½”ë“œ ìƒì„±ì— íŠ¹í™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤.</p>
            </div>
        </div>

        <div class="input-container">
            <div class="input-wrapper">
                <textarea
                    class="message-input"
                    id="messageInput"
                    placeholder="ì–´ë–¤ í”„ë¡œê·¸ë¨ì„ ë§Œë“¤ê³  ì‹¶ìœ¼ì‹ ê°€ìš”? (ì˜ˆ: ì›¹ì‚¬ì´íŠ¸, ëª¨ë°”ì¼ ì•±, ë°ì´í„° ë¶„ì„ ë„êµ¬)"
                    rows="1"
                ></textarea>
                <button class="send-button" onclick="sendMessage()">ì „ì†¡</button>
            </div>
        </div>
    </div>

    <script>
        let selectedAI = 'crew-ai';
        let messages = [];
        let modelSelectionVisible = false;
        let selectedModels = {
            crew: {
                manager: 'gpt-4',
                researcher: 'claude-3-sonnet',
                designer: 'claude-3-sonnet',
                developer: 'claude-3-sonnet',
                tester: 'gpt-3.5-turbo'
            },
            meta: {
                productManager: 'gpt-4',
                architect: 'gpt-4',
                projectManager: 'gpt-3.5-turbo',
                engineer: 'claude-3-sonnet',
                qaengineer: 'gpt-3.5-turbo'
            }
        };

        function selectAI(aiType) {
            selectedAI = aiType;

            // ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì—…ë°ì´íŠ¸
            document.querySelectorAll('.ai-option').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');

            // ëª¨ë¸ ì„ íƒ UI ë™ì  ë³€ê²½
            const crewModels = document.getElementById('crewModels');
            const metaModels = document.getElementById('metaModels');

            if (aiType === 'crew-ai') {
                crewModels.style.display = 'block';
                metaModels.style.display = 'none';
            } else {
                crewModels.style.display = 'none';
                metaModels.style.display = 'block';
            }

            // ëª¨ë¸ ì •ë³´ ì—…ë°ì´íŠ¸
            updateModelInfo();

            // AI ì „í™˜ ë©”ì‹œì§€ ì¶”ê°€
            const aiName = aiType === 'crew-ai' ? 'CREW AI' : 'MetaGPT';
            const agentInfo = getAgentInfo(aiType);
            addMessage(`${aiName}ë¡œ ì „í™˜ë˜ì—ˆìŠµë‹ˆë‹¤.

${agentInfo}

ì–´ë–¤ í”„ë¡œê·¸ë¨ì„ ë§Œë“¤ì–´ë“œë¦´ê¹Œìš”?`, 'ai', aiType);
        }

        function getAgentInfo(aiType) {
            if (aiType === 'crew-ai') {
                return `ğŸš€ **CREW AI í˜‘ì—… íŒ€ êµ¬ì„±:**
ğŸ‘” **Manager**: í”„ë¡œì íŠ¸ ì´ê´„ ë° íŒ€ ì¡°ìœ¨
ğŸ” **Researcher**: ì‹œì¥/ê¸°ìˆ  ì¡°ì‚¬ ë° ë¶„ì„
ğŸ¨ **Designer**: UI/UX ì„¤ê³„ ë° í”„ë¡œí† íƒ€ì…
ğŸ’» **Developer**: ì‹¤ì œ ì½”ë“œ êµ¬í˜„ ë° ê°œë°œ
ğŸ”§ **Tester**: í’ˆì§ˆ ë³´ì¦ ë° í…ŒìŠ¤íŠ¸

í˜‘ì—… ì¤‘ì‹¬ì˜ ì• ìì¼ ê°œë°œ í”„ë¡œì„¸ìŠ¤ë¥¼ ë”°ë¦…ë‹ˆë‹¤.`;
            } else {
                return `ğŸ“‹ **MetaGPT ë¬¸ì„œ ì¤‘ì‹¬ ê°œë°œíŒ€:**
ğŸ“‹ **Product Manager**: PRD(ì œí’ˆ ìš”êµ¬ì‚¬í•­ ë¬¸ì„œ) ì‘ì„±
ğŸ—ï¸ **Architect**: ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ë° API ì„¤ê³„
ğŸ“… **Project Manager**: í”„ë¡œì íŠ¸ ì¼ì • ë° íƒœìŠ¤í¬ ê´€ë¦¬
âš™ï¸ **Engineer**: ì½”ë“œ êµ¬í˜„ ë° ê¸°ìˆ ì  êµ¬í˜„
ğŸ§ª **QA Engineer**: í…ŒìŠ¤íŠ¸ ê³„íš ë° í’ˆì§ˆ ê´€ë¦¬

í‘œì¤€í™”ëœ ë¬¸ì„œ ê¸°ë°˜ ê°œë°œ í”„ë¡œì„¸ìŠ¤ë¥¼ ë”°ë¦…ë‹ˆë‹¤.`;
            }
        }

        function renderMessages() {
            const messagesContainer = document.getElementById('chatMessages');
            messagesContainer.innerHTML = '';

            if (messages.length === 0) {
                messagesContainer.innerHTML = `
                    <div class="welcome-message">
                        <h3>í™˜ì˜í•©ë‹ˆë‹¤! ğŸ‘‹</h3>
                        <p>AIë¥¼ ì„ íƒí•˜ê³  ë§Œë“¤ê³  ì‹¶ì€ í”„ë¡œê·¸ë¨ì— ëŒ€í•´ ì„¤ëª…í•´ì£¼ì„¸ìš”.</p>
                        <p>CREW AIëŠ” íŒ€ì›Œí¬ ê¸°ë°˜ìœ¼ë¡œ, MetaGPTëŠ” ê³ ì„±ëŠ¥ ì½”ë“œ ìƒì„±ì— íŠ¹í™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤.</p>
                    </div>
                `;
                return;
            }

            messages.forEach(message => {
                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${message.sender}`;

                let messageHTML = '';
                if (message.sender === 'ai' && message.aiType) {
                    const aiName = message.aiType === 'crew-ai' ? 'CREW AI' : 'MetaGPT';
                    messageHTML += `<div class="ai-label">${aiName}</div>`;
                }

                messageHTML += `<div class="message-bubble">${message.text.replace(/\n/g, '<br>')}</div>`;
                messageDiv.innerHTML = messageHTML;

                messagesContainer.appendChild(messageDiv);
            });

            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function addMessage(text, sender, aiType = null) {
            const message = {
                id: Date.now(),
                text: text,
                sender: sender,
                aiType: aiType,
                timestamp: new Date()
            };

            messages.push(message);
            renderMessages();
        }

        function sendMessage() {
            const input = document.getElementById('messageInput');
            const text = input.value.trim();

            if (!text) return;

            // ì‚¬ìš©ì ë©”ì‹œì§€ ì¶”ê°€
            addMessage(text, 'user');
            input.value = '';

            // ì‹¤ì œ AI API í˜¸ì¶œ
            if (selectedAI === 'meta-gpt') {
                // MetaGPT ì‹¤ì œ ì—°ê²°
                callMetaGPT(text);
            } else {
                // CREW AI ì‹œë®¬ë ˆì´ì…˜ (ë˜ëŠ” ì‹¤ì œ ì—°ê²° ì‹œ callCrewAI(text))
                setTimeout(() => {
                    const response = getModelResponseStyle(text, selectedAI);
                    addMessage(response, 'ai', selectedAI);
                }, 1500);
            }
        }

        function toggleModelSelection() {
            const modelSelection = document.getElementById('modelSelection');
            const toggleIcon = document.getElementById('toggleIcon');

            modelSelectionVisible = !modelSelectionVisible;

            if (modelSelectionVisible) {
                modelSelection.style.display = 'block';
                toggleIcon.textContent = 'â–²';
            } else {
                modelSelection.style.display = 'none';
                toggleIcon.textContent = 'â–¼';
            }
        }

        function updateModelInfo() {
            // í˜„ì¬ ì„ íƒëœ AIì— ë”°ë¼ ëª¨ë¸ ì •ë³´ ì—…ë°ì´íŠ¸
            if (selectedAI === 'crew-ai') {
                const managerEl = document.getElementById('managerModel');
                const researcherEl = document.getElementById('researcherModel');
                const designerEl = document.getElementById('designerModel');
                const developerEl = document.getElementById('developerModel');
                const testerEl = document.getElementById('testerModel');

                if (managerEl) selectedModels.crew.manager = managerEl.value;
                if (researcherEl) selectedModels.crew.researcher = researcherEl.value;
                if (designerEl) selectedModels.crew.designer = designerEl.value;
                if (developerEl) selectedModels.crew.developer = developerEl.value;
                if (testerEl) selectedModels.crew.tester = testerEl.value;

                calculateMetrics([
                    selectedModels.crew.manager,
                    selectedModels.crew.researcher,
                    selectedModels.crew.designer,
                    selectedModels.crew.developer,
                    selectedModels.crew.tester
                ]);
            } else {
                const productManagerEl = document.getElementById('productManagerModel');
                const architectEl = document.getElementById('architectModel');
                const projectManagerEl = document.getElementById('projectManagerModel');
                const engineerEl = document.getElementById('engineerModel');
                const qaengineerEl = document.getElementById('qaengineerModel');

                if (productManagerEl) selectedModels.meta.productManager = productManagerEl.value;
                if (architectEl) selectedModels.meta.architect = architectEl.value;
                if (projectManagerEl) selectedModels.meta.projectManager = projectManagerEl.value;
                if (engineerEl) selectedModels.meta.engineer = engineerEl.value;
                if (qaengineerEl) selectedModels.meta.qaengineer = qaengineerEl.value;

                calculateMetrics([
                    selectedModels.meta.productManager,
                    selectedModels.meta.architect,
                    selectedModels.meta.projectManager,
                    selectedModels.meta.engineer,
                    selectedModels.meta.qaengineer
                ]);
            }
        }

        function calculateMetrics(models) {
            // ë¹„ìš©, ì†ë„, í’ˆì§ˆ ê³„ì‚°
            const costMap = {
                'gpt-4': 5, 'gpt-4-turbo': 4, 'claude-3-opus': 5,
                'claude-3-sonnet': 3, 'gemini-pro': 3, 'gpt-3.5-turbo': 2,
                'codellama-70b': 1, 'deepseek-coder': 1, 'phind-codellama': 1,
                'llama2-70b': 1
            };

            const speedMap = {
                'gpt-4': 3, 'gpt-4-turbo': 5, 'claude-3-opus': 3,
                'claude-3-sonnet': 4, 'gemini-pro': 4, 'gpt-3.5-turbo': 5,
                'codellama-70b': 3, 'deepseek-coder': 4, 'phind-codellama': 4,
                'llama2-70b': 3
            };

            const qualityMap = {
                'gpt-4': 5, 'gpt-4-turbo': 4, 'claude-3-opus': 5,
                'claude-3-sonnet': 4, 'gemini-pro': 4, 'gpt-3.5-turbo': 3,
                'codellama-70b': 3, 'deepseek-coder': 4, 'phind-codellama': 4,
                'llama2-70b': 3
            };

            const avgCost = Math.round(models.reduce((sum, model) => sum + costMap[model], 0) / models.length);
            const avgSpeed = Math.round(models.reduce((sum, model) => sum + speedMap[model], 0) / models.length);
            const avgQuality = Math.round(models.reduce((sum, model) => sum + qualityMap[model], 0) / models.length);

            const costText = ['ë§¤ìš° ë‚®ìŒ', 'ë‚®ìŒ', 'ë³´í†µ', 'ë†’ìŒ', 'ë§¤ìš° ë†’ìŒ'][avgCost - 1];
            const speedText = ['ë§¤ìš° ëŠë¦¼', 'ëŠë¦¼', 'ë³´í†µ', 'ë¹ ë¦„', 'ë§¤ìš° ë¹ ë¦„'][avgSpeed - 1];
            const qualityText = ['ë‚®ìŒ', 'ë³´í†µ', 'ì¢‹ìŒ', 'ë†’ìŒ', 'ë§¤ìš° ë†’ìŒ'][avgQuality - 1];

            document.getElementById('costInfo').textContent = `ì˜ˆìƒ ë¹„ìš©: ${costText}`;
            document.getElementById('speedInfo').textContent = `ì²˜ë¦¬ ì†ë„: ${speedText}`;
            document.getElementById('qualityInfo').textContent = `í’ˆì§ˆ: ${qualityText}`;
        }

        function getModelResponseStyle(userMessage, aiType) {
            let response = '';

            if (aiType === 'crew-ai') {
                // CREW AI: í˜‘ì—… ì¤‘ì‹¬ ì›Œí¬í”Œë¡œìš°
                const crew = selectedModels.crew;

                if (userMessage.includes('ì›¹ì‚¬ì´íŠ¸') || userMessage.includes('web')) {
                    response = `ğŸš€ **CREW AI í˜‘ì—… íŒ€ ì‹œì‘!**

ğŸ‘” **Manager** (${crew.manager}): í”„ë¡œì íŠ¸ í‚¥ì˜¤í”„ íšŒì˜ ì§„í–‰
"íŒ€ì›ë“¤, ì›¹ì‚¬ì´íŠ¸ ê°œë°œ í”„ë¡œì íŠ¸ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤. ê°ì ì—­í• ì— ë”°ë¼ ì§„í–‰í•´ì£¼ì„¸ìš”."

ğŸ” **Researcher** (${crew.researcher}): ì‹œì¥ ì¡°ì‚¬ ì™„ë£Œ
- ê²½ìŸì‚¬ ì›¹ì‚¬ì´íŠ¸ ë¶„ì„
- ìµœì‹  ì›¹ ê¸°ìˆ  íŠ¸ë Œë“œ ì¡°ì‚¬
- ì‚¬ìš©ì ë‹ˆì¦ˆ ë¶„ì„ ê²°ê³¼: ë°˜ì‘í˜• ë””ìì¸, ë¹ ë¥¸ ë¡œë”© ì†ë„ ì¤‘ìš”

ğŸ¨ **Designer** (${crew.designer}): UI/UX ì„¤ê³„ì•ˆ ì œì‹œ
"ì‚¬ìš©ì ì¤‘ì‹¬ì˜ ì§ê´€ì ì¸ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì„¤ê³„í–ˆìŠµë‹ˆë‹¤."
- ì™€ì´ì–´í”„ë ˆì„: í—¤ë”, ë©”ì¸ ì½˜í…ì¸ , í‘¸í„° êµ¬ì¡°
- ìƒ‰ìƒ íŒ”ë ˆíŠ¸: í˜„ëŒ€ì ì´ê³  ì ‘ê·¼ì„± ê³ ë ¤
- ëª¨ë°”ì¼ í¼ìŠ¤íŠ¸ ì ‘ê·¼ë²• ì ìš©

ğŸ’» **Developer** (${crew.developer}): ê°œë°œ ê³„íš ìˆ˜ë¦½
${getModelPersonality(crew.developer, 'developer')}
í”„ë¡œì íŠ¸ êµ¬ì¡°:
\`\`\`
website-project/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ styles/
â”‚   â””â”€â”€ utils/
â”œâ”€â”€ public/
â””â”€â”€ tests/
\`\`\`

ğŸ”§ **Tester** (${crew.tester}): í…ŒìŠ¤íŠ¸ ì „ëµ ìˆ˜ë¦½
${getModelPersonality(crew.tester, 'tester')}

**íŒ€ ê²°ë¡ **: í˜‘ì—…ì„ í†µí•´ ê³ í’ˆì§ˆ ì›¹ì‚¬ì´íŠ¸ë¥¼ 3ì£¼ ë‚´ ì™„ì„± ì˜ˆì •
ì–´ë–¤ êµ¬ì²´ì ì¸ ê¸°ëŠ¥ë¶€í„° ì‹œì‘í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`;
                } else {
                    response = `ğŸš€ **CREW AI íŒ€ ë¶„ì„ ê²°ê³¼**

ìš”ì²­: "${userMessage}"

ğŸ‘” **Manager** (${crew.manager}):
"${userMessage}" í”„ë¡œì íŠ¸ ë¶„ì„ì„ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤.
- í”„ë¡œì íŠ¸ ë³µì¡ë„: ì¤‘ê°„
- ì˜ˆìƒ ê¸°ê°„: 2-4ì£¼
- í•„ìš” ë¦¬ì†ŒìŠ¤: íŒ€ ì „ì²´ ì°¸ì—¬

ğŸ” **Researcher** (${crew.researcher}):
${getModelPersonality(crew.researcher, 'researcher')}

ğŸ¨ **Designer** (${crew.designer}):
ì‚¬ìš©ì ê²½í—˜ ê´€ì ì—ì„œ ë‹¤ìŒì„ ê³ ë ¤í•´ì•¼ í•©ë‹ˆë‹¤:
- ì‚¬ìš©ì ì—¬ì • ë§¤í•‘
- ì¸í„°ë™ì…˜ ë””ìì¸
- ì ‘ê·¼ì„± ì¤€ìˆ˜

ğŸ’» **Developer** (${crew.developer}):
${getModelPersonality(crew.developer, 'developer')}

ğŸ”§ **Tester** (${crew.tester}):
í’ˆì§ˆ ë³´ì¦ì„ ìœ„í•œ í…ŒìŠ¤íŠ¸ ê³„íš:
- ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
- í†µí•© í…ŒìŠ¤íŠ¸
- ì‚¬ìš©ì ì¸ìˆ˜ í…ŒìŠ¤íŠ¸

êµ¬ì²´ì ì¸ ìš”êµ¬ì‚¬í•­ì„ ë” ì•Œë ¤ì£¼ì‹œë©´ ìƒì„¸ ê³„íšì„ ì„¸ìš°ê² ìŠµë‹ˆë‹¤!`;
                }
            } else {
                // MetaGPT: ë¬¸ì„œ ì¤‘ì‹¬ ì›Œí¬í”Œë¡œìš°
                const meta = selectedModels.meta;

                if (userMessage.includes('ì›¹ì‚¬ì´íŠ¸') || userMessage.includes('web')) {
                    response = `ğŸ“‹ **MetaGPT í‘œì¤€í™” í”„ë¡œì„¸ìŠ¤ ì‹œì‘**

**1ë‹¨ê³„: PRD (ì œí’ˆ ìš”êµ¬ì‚¬í•­ ë¬¸ì„œ) ì‘ì„±**

ğŸ“‹ **Product Manager** (${meta.productManager}):

## ì›¹ì‚¬ì´íŠ¸ PRD v1.0

### ì œí’ˆ ê°œìš”
- **ëª©ì **: ì‚¬ìš©ì ì¹œí™”ì ì¸ ì›¹ì‚¬ì´íŠ¸ êµ¬ì¶•
- **íƒ€ê²Ÿ ì‚¬ìš©ì**: ì¼ë°˜ ì›¹ ì‚¬ìš©ì
- **í•µì‹¬ ê°€ì¹˜ ì œì•ˆ**: ì •ë³´ ì ‘ê·¼ì„±ê³¼ ì‚¬ìš©ì„±

### ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­
1. **í•„ìˆ˜ ê¸°ëŠ¥**
   - í™ˆí˜ì´ì§€
   - ë„¤ë¹„ê²Œì´ì…˜ ë©”ë‰´
   - ì½˜í…ì¸  í˜ì´ì§€
   - ì—°ë½ì²˜ í˜ì´ì§€

2. **ì„±ëŠ¥ ìš”êµ¬ì‚¬í•­**
   - í˜ì´ì§€ ë¡œë”© ì‹œê°„ < 3ì´ˆ
   - ëª¨ë°”ì¼ ë°˜ì‘í˜• ì§€ì›
   - SEO ìµœì í™”

---

**2ë‹¨ê³„: ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ì„¤ê³„**

ğŸ—ï¸ **Architect** (${meta.architect}):

## ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ë¬¸ì„œ v1.0

### ê¸°ìˆ  ìŠ¤íƒ
- Frontend: HTML5, CSS3, JavaScript
- ë¹Œë“œ ë„êµ¬: Webpack
- ë°°í¬: Static hosting

### API ì„¤ê³„ì„œ
\`\`\`
GET /api/content/{id}
POST /api/contact
\`\`\`

---

**3ë‹¨ê³„: í”„ë¡œì íŠ¸ ê´€ë¦¬**

ğŸ“… **Project Manager** (${meta.projectManager}):
- **ìŠ¤í”„ë¦°íŠ¸ 1** (1ì£¼): UI ì„¤ê³„ ë° ë§ˆí¬ì—…
- **ìŠ¤í”„ë¦°íŠ¸ 2** (1ì£¼): ê¸°ëŠ¥ êµ¬í˜„
- **ìŠ¤í”„ë¦°íŠ¸ 3** (1ì£¼): í…ŒìŠ¤íŠ¸ ë° ë°°í¬

ë‹¤ìŒ ë‹¨ê³„ë¡œ ì§„í–‰í• ê¹Œìš”?`;
                } else {
                    response = `ğŸ“‹ **MetaGPT ë¬¸ì„œ ê¸°ë°˜ ë¶„ì„**

ìš”ì²­: "${userMessage}"

**Step 1: ìš”êµ¬ì‚¬í•­ ë¶„ì„ ë¬¸ì„œ**

ğŸ“‹ **Product Manager** (${meta.productManager}):
${getModelPersonality(meta.productManager, 'product_manager')}

## PRD (ì œí’ˆ ìš”êµ¬ì‚¬í•­ ë¬¸ì„œ)
- **í”„ë¡œì íŠ¸ëª…**: ${userMessage} êµ¬í˜„
- **ë¹„ì¦ˆë‹ˆìŠ¤ ëª©í‘œ**: ì‚¬ìš©ì ìš”êµ¬ì‚¬í•­ ì¶©ì¡±
- **ì„±ê³µ ì§€í‘œ**: ê¸°ëŠ¥ ì™„ì„±ë„, ì‚¬ìš©ì„±

---

**Step 2: ì‹œìŠ¤í…œ ì„¤ê³„ ë¬¸ì„œ**

ğŸ—ï¸ **Architect** (${meta.architect}):
## ì•„í‚¤í…ì²˜ ì„¤ê³„ì„œ
- **ì‹œìŠ¤í…œ êµ¬ì¡°**: ëª¨ë“ˆí™”ëœ ì„¤ê³„
- **ë°ì´í„° íë¦„**: ì…ë ¥ â†’ ì²˜ë¦¬ â†’ ì¶œë ¥
- **ê¸°ìˆ  ì„ íƒ**: ìš”êµ¬ì‚¬í•­ì— ìµœì í™”ëœ ìŠ¤íƒ

---

**Step 3: í”„ë¡œì íŠ¸ ê³„íš**

ğŸ“… **Project Manager** (${meta.projectManager}):
## í”„ë¡œì íŠ¸ ê³„íšì„œ
- **ë§ˆì¼ìŠ¤í†¤**: ì„¤ê³„ â†’ êµ¬í˜„ â†’ í…ŒìŠ¤íŠ¸ â†’ ë°°í¬
- **ë¦¬ìŠ¤í¬ ê´€ë¦¬**: ê¸°ìˆ ì  ë‚œì´ë„, ì¼ì • ì§€ì—°
- **ì»¤ë®¤ë‹ˆì¼€ì´ì…˜**: ì£¼ê°„ ë¦¬ë·° ë¯¸íŒ…

êµ¬ì²´ì ì¸ ìš”êµ¬ì‚¬í•­ ë¬¸ì„œë¥¼ ì‘ì„±í•˜ê¸° ìœ„í•´ ë” ìì„¸í•œ ì •ë³´ê°€ í•„ìš”í•©ë‹ˆë‹¤.`;
                }
            }

            return response;
        }

        // MetaGPT ì‹¤ì œ í˜¸ì¶œ
        async function callMetaGPT(requirement) {
            try {
                // ë¡œë”© ë©”ì‹œì§€ í‘œì‹œ
                const loadingMessage = {
                    id: Date.now(),
                    text: 'ğŸ“‹ MetaGPT íŒ€ì´ ë¶„ì„ ì¤‘ì…ë‹ˆë‹¤...\n\nâ³ ë¬¸ì„œ ì‘ì„± ë° ì‹œìŠ¤í…œ ì„¤ê³„ ì§„í–‰ ì¤‘',
                    sender: 'ai',
                    aiType: 'meta-gpt',
                    timestamp: new Date()
                };
                messages.push(loadingMessage);
                renderMessages();

                // ë°±ì—”ë“œ API í˜¸ì¶œ
                const response = await fetch('/api/metagpt', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        requirement: requirement,
                        selectedModels: selectedModels.meta
                    })
                });

                const result = await response.json();

                // ë¡œë”© ë©”ì‹œì§€ ì œê±°
                messages = messages.filter(msg => msg.id !== loadingMessage.id);

                let responseText = '';
                if (result.success) {
                    responseText = `ğŸ“‹ **MetaGPT ì‹¤í–‰ ì™„ë£Œ!**

**ìš”êµ¬ì‚¬í•­**: ${result.requirement}

**âœ… ì‹¤í–‰ ê²°ê³¼**: ${result.message}

**ğŸ‘¥ ì°¸ì—¬ ì—ì´ì „íŠ¸**:
${result.agents.map(agent => `- ${agent}`).join('\n')}

**ğŸ“‹ í”„ë¡œì„¸ìŠ¤**: ${result.process}

**ğŸ”§ ì‚¬ìš©ëœ ëª¨ë¸ë“¤**:
${Object.entries(selectedModels.meta).map(([role, model]) => `- ${role}: ${model}`).join('\n')}`;
                } else {
                    responseText = `âŒ **MetaGPT ì‹¤í–‰ ì‹¤íŒ¨**

ì˜¤ë¥˜: ${result.error}

ì‹œë®¬ë ˆì´ì…˜ ëª¨ë“œë¡œ ì „í™˜í•©ë‹ˆë‹¤...`;

                    // ì‹¤íŒ¨ ì‹œ ì‹œë®¬ë ˆì´ì…˜ìœ¼ë¡œ ëŒ€ì²´
                    setTimeout(() => {
                        const simulatedResponse = getModelResponseStyle(requirement, 'meta-gpt');
                        addMessage(simulatedResponse, 'ai', 'meta-gpt');
                    }, 1000);
                    return;
                }

                addMessage(responseText, 'ai', 'meta-gpt');

            } catch (error) {
                console.error('MetaGPT API call failed:', error);

                // ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
                addMessage(`âŒ **ì—°ê²° ì˜¤ë¥˜**

MetaGPT ì„œë²„ ì—°ê²°ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ${error.message}

ì‹œë®¬ë ˆì´ì…˜ ëª¨ë“œë¡œ ì „í™˜í•©ë‹ˆë‹¤...`, 'ai', 'meta-gpt');

                // ì‹œë®¬ë ˆì´ì…˜ìœ¼ë¡œ ëŒ€ì²´
                setTimeout(() => {
                    const simulatedResponse = getModelResponseStyle(requirement, 'meta-gpt');
                    addMessage(simulatedResponse, 'ai', 'meta-gpt');
                }, 1000);
            }
        }

        // ëª¨ë¸ë³„ ì„±ê²©ê³¼ íŠ¹ì„±ì„ ë°˜ì˜í•œ ì‘ë‹µ
        function getModelPersonality(model, role) {
            const personalities = {
                'gpt-4': {
                    'developer': 'ë†’ì€ ì½”ë“œ í’ˆì§ˆê³¼ ì•„í‚¤í…ì²˜ë¥¼ ì¤‘ì‹œí•˜ëŠ” ì ‘ê·¼ë²•ìœ¼ë¡œ ê°œë°œí•˜ê² ìŠµë‹ˆë‹¤.',
                    'tester': 'ì¢…í•©ì ì´ê³  ì²´ê³„ì ì¸ í…ŒìŠ¤íŠ¸ ì „ëµì„ ìˆ˜ë¦½í•˜ê² ìŠµë‹ˆë‹¤.',
                    'researcher': 'ì‹¬ë„ ìˆëŠ” ë¶„ì„ê³¼ ë‹¤ê°ë„ ê²€í† ë¥¼ í†µí•´ ìµœì ì˜ ì†”ë£¨ì…˜ì„ ì°¾ê² ìŠµë‹ˆë‹¤.',
                    'product_manager': 'PRD ì‘ì„± ì‹œ ë¹„ì¦ˆë‹ˆìŠ¤ ëª©í‘œì™€ ì‚¬ìš©ì ê°€ì¹˜ë¥¼ ëª…í™•íˆ ì •ì˜í•©ë‹ˆë‹¤.'
                },
                'claude-3-sonnet': {
                    'developer': 'ë…¼ë¦¬ì ì´ê³  íš¨ìœ¨ì ì¸ ì½”ë“œ êµ¬ì¡°ë¡œ êµ¬í˜„í•˜ê² ìŠµë‹ˆë‹¤.',
                    'tester': 'ì²´ê³„ì ì¸ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì„¤ê³„ë¡œ í’ˆì§ˆì„ ë³´ì¥í•˜ê² ìŠµë‹ˆë‹¤.',
                    'researcher': 'ë¶„ì„ì  ì‚¬ê³ ë¥¼ í†µí•´ ì •í™•í•œ ì •ë³´ë¥¼ ìˆ˜ì§‘í•˜ê² ìŠµë‹ˆë‹¤.',
                    'product_manager': 'ì‚¬ìš©ì ì¤‘ì‹¬ì˜ ìš”êµ¬ì‚¬í•­ ë¶„ì„ì— ì¤‘ì ì„ ë‘¡ë‹ˆë‹¤.'
                },
                'deepseek-coder': {
                    'developer': 'ì½”ë“œ ìƒì„±ì— íŠ¹í™”ëœ ìµœì í™”ëœ êµ¬í˜„ì„ ì œê³µí•˜ê² ìŠµë‹ˆë‹¤.',
                },
                'gpt-3.5-turbo': {
                    'tester': 'íš¨ìœ¨ì ì´ê³  ì‹¤ìš©ì ì¸ í…ŒìŠ¤íŠ¸ ì ‘ê·¼ë²•ì„ ì‚¬ìš©í•˜ê² ìŠµë‹ˆë‹¤.',
                    'product_manager': 'ëª…í™•í•˜ê³  ì‹¤í–‰ ê°€ëŠ¥í•œ ìš”êµ¬ì‚¬í•­ ë¬¸ì„œë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.'
                }
            };

            return personalities[model]?.[role] || 'ì „ë¬¸ì ì¸ ì ‘ê·¼ë²•ìœ¼ë¡œ ì‘ì—…í•˜ê² ìŠµë‹ˆë‹¤.';
        }

        // Enter í‚¤ë¡œ ì „ì†¡
        document.getElementById('messageInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });

        // ì´ˆê¸° ëª¨ë¸ ì •ë³´ ì—…ë°ì´íŠ¸
        updateModelInfo();
    </script>
</body>
</html>